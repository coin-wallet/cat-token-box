import {feeUtxoParse, tokenInfoParse, tokenUtxoParse} from "../src/utils/paramsUtils";
import {SupportedNetwork} from "../src/common";
import {validatePrevTx} from "../src/utils/prevTx";


describe("cat20 params", () => {

    test("findTokenMetadataById getTokenMetadata ", async () => {
        // JSON string
        const tokenStr = '{"minterAddr":"bc1pqw9ncs4sna0ndh85ux5dhh9swueyjql23t4em8j0smywkqsngfmsn7gmua","tokenAddr":"bc1plhz9wf0desgz8t32xm67vay9hgdmrnwzjzujgg0k9883cfxxgkzs20qfd5","info":{"max":"21000000","name":"cat","limit":"5","symbol":"CAT","premine":"0","decimals":2,"minterMd5":"21cbd2e538f2b6cc40ee180e174f1e25"},"tokenId":"45ee725c2c5993b3e4d308842d87e973bf1951f5f7a804b21e4dd964ecd12d6b_0","revealTxid":"9a3fcb5a8344f53f2ba580f7d488469346bff9efe7780fbbf8d3490e3a3a0cd7","revealHeight":6540,"genesisTxid":"45ee725c2c5993b3e4d308842d87e973bf1951f5f7a804b21e4dd964ecd12d6b","name":"cat","symbol":"CAT","decimals":2,"minterPubKey":"038b3c42b09f5f36dcf4e1a8dbdcb077324903ea8aeb9d9e4f86c8eb02134277","tokenPubKey":"fdc45725edcc1023ae2a36f5e67485ba1bb1cdc290b92421f629cf1c24c64585"}';

        console.log(tokenInfoParse(tokenStr, SupportedNetwork.fractalMainnet))

    })

    test("getFeeUtxos", async () => {
        const tokenStr = `[
          {
            "txid": "050fd76a622c8965570c310236580672ddd9aad9525a617c65b337412ec0a065",
            "vout": 1,
            "satoshi": 181724336,
            "scriptType": "5120",
            "scriptPk": "5120f0513064fe1e5b5c31bedff43b943f2f1211d14ab2891687241b138d214888e3",
            "codeType": 9,
            "address": "bc1p7pgnqe87red4cvd7ml6rh9pl9ufpr522k2y3dpeyrvfc6g2g3r3s3ae9dr",
            "height": 4194303,
            "idx": 35546,
            "isOpInRBF": false,
            "isSpent": false,
            "inscriptions": []
          },
          {
            "txid": "934677e1b69daea7f4f3fab53e6d9a70103089debf4126e9f0bfb7821864738f",
            "vout": 0,
            "satoshi": 5100000,
            "scriptType": "5120",
            "scriptPk": "5120f0513064fe1e5b5c31bedff43b943f2f1211d14ab2891687241b138d214888e3",
            "codeType": 9,
            "address": "bc1p7pgnqe87red4cvd7ml6rh9pl9ufpr522k2y3dpeyrvfc6g2g3r3s3ae9dr",
            "height": 31577,
            "idx": 2380,
            "isOpInRBF": false,
            "isSpent": false,
            "inscriptions": []
          },
          {
            "txid": "c1083cb00478ebf1e4ec1951319e0f2bc8361aeb5a1b643cba86b31cfaf3b613",
            "vout": 1,
            "satoshi": 33684401,
            "scriptType": "5120",
            "scriptPk": "5120f0513064fe1e5b5c31bedff43b943f2f1211d14ab2891687241b138d214888e3",
            "codeType": 9,
            "address": "bc1p7pgnqe87red4cvd7ml6rh9pl9ufpr522k2y3dpeyrvfc6g2g3r3s3ae9dr",
            "height": 31568,
            "idx": 314,
            "isOpInRBF": false,
            "isSpent": false,
            "inscriptions": []
          }
          ]`;
        const tokenContracts = feeUtxoParse(tokenStr)
        console.log(tokenContracts.length)
    })

    test("getTokens", async () => {
        const tokenStr = `[
          {
            "utxo": {
              "txId": "80ea11690349ddb6b554f2f7be40905d0b2ed4d0ac272b752aa52c3ee5dc6e58",
              "outputIndex": 1,
              "script": "5120fdc45725edcc1023ae2a36f5e67485ba1bb1cdc290b92421f629cf1c24c64585",
              "satoshis": "330"
            },
            "txoStateHashes": [
              "b21d642f5efa4da5070fffdb9b8773f5fdc39fb0",
              "",
              "",
              "",
              ""
            ],
            "state": {
              "address": "83587562c89dd70c0bed2e9c6197b5e598498148",
              "amount": "500"
            }
          },
          {
            "utxo": {
              "txId": "a3a0e6641b3978da3c0b65dd14df7cdfeda499fe4264693db57c78b22e737345",
              "outputIndex": 3,
              "script": "5120fdc45725edcc1023ae2a36f5e67485ba1bb1cdc290b92421f629cf1c24c64585",
              "satoshis": "330"
            },
            "txoStateHashes": [
              "347d6ae4b9998699cf48cf20acfb4d81902b0a13",
              "c04905e7e9d4d4f17e27441fda94b5fbe283a7db",
              "b21d642f5efa4da5070fffdb9b8773f5fdc39fb0",
              "",
              ""
            ],
            "state": {
              "address": "83587562c89dd70c0bed2e9c6197b5e598498148",
              "amount": "500"
            }
          }
        ]`;
        const tokenContracts = tokenUtxoParse(tokenStr)
        console.log(tokenContracts.length)
    })
    test("validate prevtx", async () => {
        // tx - 80ea11690349ddb6b554f2f7be40905d0b2ed4d0ac272b752aa52c3ee5dc6e58
        const prevTxHex = '020000000001024ee531a4541fd82e9850cfa279a4e3b3db8ee113fe9130ef733a68f86817c3370200000000ffffffff249614df8a4b8374f045294a1c7f816bf57f5d90f6aa051a017fceb4eb960a2f0200000000ffffffff0200000000000000001a6a18636174018d6d9e2fdf9c5312628bae72c120ef659e1eee184a01000000000000225120fdc45725edcc1023ae2a36f5e67485ba1bb1cdc290b92421f629cf1c24c645856814b21d642f5efa4da5070fffdb9b8773f5fdc39fb0000000001483587562c89dd70c0bed2e9c6197b5e59849814802f40100000020729c539e5d1853ee8ae99c479a30852d1096915716ba8c33dcca1ec50c73244d401528e3892f34ca76c8fd2edfc69e6e2701a917e540cdc6e7aee7cb03e92671e7169f18e41fb97af414aa25aec6482953b03770d9c795c6a28ce1c88082b99bc6084a01000000000000084a01000000000000225120fdc45725edcc1023ae2a36f5e67485ba1bb1cdc290b92421f629cf1c24c64585010102f4011466e0d4c0f89e47add4aec78b645b8108e9b521071406a50e41bf409707635fcb70acab553ebeb04d271406a50e41bf409707635fcb70acab553ebeb04d2714fde77ec9f0ba821e1f4fa98bc8c58367a7d0b0d100000402000000010229d5564b8ec1c3b986ca84bfddea489b828aec5aa790850977be4697f1620b13470100000000ffffffff292199efbe14e624c7dc765721ca9237f3396ff37cd90c7d2fb4bad5eddc35ccaa0400000000ffffffff0000000001050105080000000000000000084b01000000000000084b01000000000000084a010000000000000823b9ff6d00000000001a6a186361740166e0d4c0f89e47add4aec78b645b8108e9b52107225120038b3c42b09f5f36dcf4e1a8dbdcb077324903ea8aeb9d9e4f86c8eb02134277225120038b3c42b09f5f36dcf4e1a8dbdcb077324903ea8aeb9d9e4f86c8eb02134277225120fdc45725edcc1023ae2a36f5e67485ba1bb1cdc290b92421f629cf1c24c64585225120729c539e5d1853ee8ae99c479a30852d1096915716ba8c33dcca1ec50c73244d00040400000020d5564b8ec1c3b986ca84bfddea489b828aec5aa790850977be4697f1620b13470401000000010104ffffffff005002000000025440a011ec94587a416c68ca8b5560b6f31dd0fabe6a26e1a83ea8837674994a0100000000ffffffff95340e0580a9af034de10d3a9147840043e5016439a3813eb061519f7680972e000008000000ffffffff04000001040104080000000000000000084a01000000000000084a01000000000000084a0100000000000000001a6a186361740175a3d0e514234e731b8aec8864b076c1464ce8b8225120038b3c42b09f5f36dcf4e1a8dbdcb077324903ea8aeb9d9e4f86c8eb02134277225120038b3c42b09f5f36dcf4e1a8dbdcb077324903ea8aeb9d9e4f86c8eb02134277225120fdc45725edcc1023ae2a36f5e67485ba1bb1cdc290b92421f629cf1c24c64585000004000000000402000000040300000020e929c3abc581467fc3c19960cc01d97203cdc6fa85f80a0ac2f5dac603a601aa206627a839ec5f98ee3ad441de7a4f026beedd6f51abc8e1a2a0416be6a2b518e920b81d57fa29cec4f257a237eca5bdae5590a19141689d8e6fd1b9b8ffa39176cd2012a3ae445661ce5dee78d0650d33362dec29c4f82af05e7e57fb595bbbacf0ca20d8462f69359583c29edad138fd81e92c44175a9b963adf1034c03980be310d9601020400000000206a1217adb91583bef6ec8b1212b3cc85e4918b4058fcc593d05240ccd3eb12f3010004ffffffff1f67832bc8faa3afcfad5d7720be3f9060efc2135d7f43e960eb7a711f5da5e70123244ee531a4541fd82e9850cfa279a4e3b3db8ee113fe9130ef733a68f86817c3370200000024249614df8a4b8374f045294a1c7f816bf57f5d90f6aa051a017fceb4eb960a2f0200000000000000000102204ee531a4541fd82e9850cfa279a4e3b3db8ee113fe9130ef733a68f86817c3370402000000225120038b3c42b09f5f36dcf4e1a8dbdcb077324903ea8aeb9d9e4f86c8eb0213427716001403e7682bdad6936821efb8edf37c3001ce8004960000000000080000000000000000fd7d0d0800000000000000002079be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f817984c807bb52d7a9fef58323eb1bf7a407db382d2f3f2d81bb1224f49fe518f6d48d37c7bb52d7a9fef58323eb1bf7a407db382d2f3f2d81bb1224f49fe518f6d48d37c79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f8179879be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f8179842f40a48df4b2a70c8b4924bf2654661ed3d95fd66a313eb87237597c628e4a031f40a48df4b2a70c8b4924bf2654661ed3d95fd66a313eb87237597c628e4a0310000246b2dd1ec64d94d1eb204a8f7f55119bf73e9872d8408d3e4b393592c5c72ee45000000000400752b7d0002f401000128790128790128790128790128790128790128790128790128790128790128790128790128790128790113795e797e5d797e5c797e5b797e5a797e59797e58797e57797e56797e55797e54797e53797ea8011579787ea85279017f9f695279009c6301006752796878557952797e8801187955797e54798b7e6b6d6d6d6d6d6d6d6d6c775879ad011a79011a79011a79011a79011a79011a79011a79011a79011a79011a79013079012b795b795b795b795b795b795b790056766b796c756e7e777755766b796c756e7e777754766b796c756e7e777753766b796c756e7e777752766b796c756e7e777751766b796c756e7e7b756b6d6d6d6c77a852798855796e760087630100776876030000007e527987777777695479537978760087630100776876030000007e527987777777695b795b795b795b795b795b79565c797600a26976569f69948c766b796c756b6d6d6d6c547954797e886d6d6d6d6d6d607960796079607960796079012a795679567956795679567956790056766b796c756e827752797e7e777755766b796c756e827752797e7e777754766b796c756e827752797e7e777753766b796c756e827752797e7e777752766b796c756e827752797e7e777751766b796c756e827752797e7e7b756b6d6d6d6c77a878886d6d6d75015d79015d79015d79015d79015d79015d79016679016679016679786351670100685379787e52797ea96b6d6d6c014e79014e79014e79014e79014e79014e7956007600a26976569f69948c766b796c756b6d6d6d6c011b795879066a1863617401787e77527988577957795779577957795d79007657766b796c75a97e7d7756766b796c75a97e7d7755766b796c75a97e7d7754766b796c75a97e7d7753766b796c75a97e7d77a95279876b6d6d6d6c77695279587958795879587958795557798c7600a26976559f69948c766b796c756b6d6d756c886d6d6d6d75600115797600a26976569f6994766b796c750113790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790135790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790116790116797e7601167901167901167901167901167901167955766b796c756b6d6d6d6c7e7d7701167901167901167901167901167901167954766b796c756b6d6d6d6c7e7d7701167901167901167901167901167901167953766b796c756b6d6d6d6c7e7d7701167901167901167901167901167901167952766b796c756b6d6d6d6c7e7d7701167901167901167901167901167901167951766b796c756b6d6d6d6c7e7d7701167901167901167901167901167901167900766b796c756b6d6d6d6c7e7d775f797e775f795f79885d795d795d795d795d795d7955766b796c756b6d6d6d6c58795879587958795879587955766b796c756b6d6d6d6c768277000113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7954766b796c756b6d6d6d6c58795879587958795879587954766b796c756b6d6d6d6c768277510113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7953766b796c756b6d6d6d6c58795879587958795879587953766b796c756b6d6d6d6c768277520113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7952766b796c756b6d6d6d6c58795879587958795879587952766b796c756b6d6d6d6c768277530113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7951766b796c756b6d6d6d6c58795879587958795879587951766b796c756b6d6d6d6c768277540113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7900766b796c756b6d6d6d6c58795879587958795879587900766b796c756b6d6d6d6c768277550113799f637052797e53797e7e547a7572537a537975686d787752797eaa6b6d6d6d6d6d6d6d6d6d6d6d6d6c88011979011979011979011979707e01007e787e6b6d6d6c012f79012f79012f79012f79012f79012f7956011d797600a26976569f69948c766b796c756b6d6d6d6c8801177901197978760087630100776876030000007e527987777777690119790119797e7653798764011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579012d79012c79011679011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579007601147901147901147901147953766b796c756b6d6d6c7e7d7701147901147901147901147952766b796c756b6d6d6c7e7d7701147901147901147901147951766b796c756b6d6d6c7e7d7701147901147901147901147900766b796c756b6d6d6c7e775f795f79885d795d795d795d795d795d7955766b796c756b6d6d6d6c58795879587958795879587955766b796c756b6d6d6d6c768277000113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7954766b796c756b6d6d6d6c58795879587958795879587954766b796c756b6d6d6d6c768277510113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7953766b796c756b6d6d6d6c58795879587958795879587953766b796c756b6d6d6d6c768277520113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7952766b796c756b6d6d6d6c58795879587958795879587952766b796c756b6d6d6d6c768277530113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7951766b796c756b6d6d6d6c58795879587958795879587951766b796c756b6d6d6d6c768277540113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7900766b796c756b6d6d6d6c58795879587958795879587900766b796c756b6d6d6d6c768277550113799f637052797e53797e7e547a7572537a537975686d787752797eaa6b6d6d6d6d6d6d6d6d6d6d6c5379885979597959795979597959795658797600a26976569f69948c766b796c756b6d6d6d6c78886d6d6d6d6d6d6d6d6d6d6d686d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d7500000000016c766b796c787700a0636e937b757c52798b537a757b7b52797554795679016a7978827d770122a1696e7e53797e7777777e557a75547a547a547a547a5479755379016779515379786351670100685379787e52797ea96b6d6d6ca97e547a7572537a5379756875016c8c766b796c787700a0636e937b757c52798b537a757b7b52797554795679016a7978827d770122a1696e7e53797e7777777e557a75547a547a547a547a5479755379016779515379786351670100685379787e52797ea96b6d6d6ca97e547a7572537a537975687500016e7900a06378016f79937b757c52798b537a757b7b527975537901707901707978827701149d6e7ea97777a97e547a7572537a53797501667901687978827d770122a1696e7e53797e6b6d6d6c6801657964587900a067006863016b79016b797ea9577988016979016b79ad780165795a79939d59790165795a79939d016e7959799d67780165799d016e795879a169687001767901767901767901767901767956795679557894000052799f637600a97e77685152799f637600a97e77685252799f637600a97e77685352799f637600a97e77685452799f637600a97e776877777ea9557955795579557955795579007657766b796c75a97e7d7756766b796c75a97e7d7755766b796c75a97e7d7754766b796c75a97e7d7753766b796c75a97e7d77a95279876b6d6d6d6c776976066a1863617401787e770800000000000000007882777e787e6b6d6d6d6d6c770111790111797601127987646e78827d770122a1696e7e53797e77777767006877777857797e53797e787ea876012c79876b6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6c21c050929b74c1a04954b78b4b6035e97a5e078a5a0f28ec96d547bfee9ace803ac002473044022034c5638fe0a43e87066e27f8bb2e2e5cfddf7c4e7458d9e0b3c2a6ec7d4513ad0220310744796f0e4805f35ece8b162c889eed5ed9aa6bc9aa589c663087c8f2b6eb01210274cce31a302f5545f2e7469e95babc867be6d90248789d6f2e0ff15934c0226d03000000'

        // prev tx = mint - 37c31768f8683a73ef3091fe13e18edbb3e3a479a2cf50982ed81f54a431e54e
        const prevPrevTxHex = '02000000000102d5564b8ec1c3b986ca84bfddea489b828aec5aa790850977be4697f1620b13470100000000ffffffff2199efbe14e624c7dc765721ca9237f3396ff37cd90c7d2fb4bad5eddc35ccaa0400000000ffffffff0500000000000000001a6a186361740166e0d4c0f89e47add4aec78b645b8108e9b521074b01000000000000225120038b3c42b09f5f36dcf4e1a8dbdcb077324903ea8aeb9d9e4f86c8eb021342774b01000000000000225120038b3c42b09f5f36dcf4e1a8dbdcb077324903ea8aeb9d9e4f86c8eb021342774a01000000000000225120fdc45725edcc1023ae2a36f5e67485ba1bb1cdc290b92421f629cf1c24c6458523b9ff6d00000000225120729c539e5d1853ee8ae99c479a30852d1096915716ba8c33dcca1ec50c73244d681406a50e41bf409707635fcb70acab553ebeb04d271406a50e41bf409707635fcb70acab553ebeb04d2714fde77ec9f0ba821e1f4fa98bc8c58367a7d0b0d10000148ab96d0bb79a714d80f736dd6f18ceb69b9ef36e02f40102f40102f4010020729c539e5d1853ee8ae99c479a30852d1096915716ba8c33dcca1ec50c73244d401528e3892f34ca76c8fd2edfc69e6e2701a917e540cdc6e7aee7cb03e92671e7169f18e41fb97af414aa25aec6482953b03770d9c795c6a28ce1c88082b99bc6084b01000000000000084a01000000000000225120fdc45725edcc1023ae2a36f5e67485ba1bb1cdc290b92421f629cf1c24c64585010102dc051475a3d0e514234e731b8aec8864b076c1464ce8b814ac6735480c0ea83b72a9042958a58783f0baa63514ac6735480c0ea83b72a9042958a58783f0baa63514a353196f48c3febdd3cc23e465c29c0890f61305000004020000000102295440a011ec94587a416c68ca8b5560b6f31dd0fabe6a26e1a83ea8837674994a0100000000ffffffff2995340e0580a9af034de10d3a9147840043e5016439a3813eb061519f7680972e0000000000ffffffff0000000001040104080000000000000000084a01000000000000084a01000000000000084a0100000000000000001a6a186361740175a3d0e514234e731b8aec8864b076c1464ce8b8225120038b3c42b09f5f36dcf4e1a8dbdcb077324903ea8aeb9d9e4f86c8eb02134277225120038b3c42b09f5f36dcf4e1a8dbdcb077324903ea8aeb9d9e4f86c8eb02134277225120fdc45725edcc1023ae2a36f5e67485ba1bb1cdc290b92421f629cf1c24c6458500000400000000205440a011ec94587a416c68ca8b5560b6f31dd0fabe6a26e1a83ea8837674994a0401000000010104ffffffff00500200000002063d7a12225159a865a82949980c8308c105af1e55a82bd9bfe069f1be2f13b80200000000ffffffff9e05d3372cc4ccaffce27394f5c220eca5e5ab28abeea6e74b3183127281a949020008000000ffffffff05000001050105080000000000000000084b01000000000000084b01000000000000084a0100000000000008b795d51300000000001a6a18636174015bec848392753c1ae9a9362fb3cdebbca1545729225120038b3c42b09f5f36dcf4e1a8dbdcb077324903ea8aeb9d9e4f86c8eb02134277225120038b3c42b09f5f36dcf4e1a8dbdcb077324903ea8aeb9d9e4f86c8eb02134277225120fdc45725edcc1023ae2a36f5e67485ba1bb1cdc290b92421f629cf1c24c64585225120e87d2f56d5ccb4eb69ac5538ef7c0b69876f800a61edfa4c0b5a140ee38fd1420004000000000402000000040400000020815cd4c0526030b1f30abe27d26038959c7e6dbf6840c5f668f7ad80686f5f2f204ecc8c0d785395e65ec20aa5e65cbede511fd51b81b61c9fb82ce261d683b7f020edd566a7e127b50b8f19c95a4c0667025ef1b4224180e03f96c3675f3df37ff82012a3ae445661ce5dee78d0650d33362dec29c4f82af05e7e57fb595bbbacf0ca207e54bd0af2e5a6c44e6b5a357c1258453144acf5eab55d456696fd27cb78c26a01020400000000206a1217adb91583bef6ec8b1212b3cc85e4918b4058fcc593d05240ccd3eb12f3010004ffffffff1f10edb229a8356e09e1369d4ad30bf5453bc36d6ff861069be29020880b6db2013724d5564b8ec1c3b986ca84bfddea489b828aec5aa790850977be4697f1620b134701000000242199efbe14e624c7dc765721ca9237f3396ff37cd90c7d2fb4bad5eddc35ccaa040000000000000000010120d5564b8ec1c3b986ca84bfddea489b828aec5aa790850977be4697f1620b13470401000000225120038b3c42b09f5f36dcf4e1a8dbdcb077324903ea8aeb9d9e4f86c8eb02134277225120729c539e5d1853ee8ae99c479a30852d1096915716ba8c33dcca1ec50c73244d00000000225120729c539e5d1853ee8ae99c479a30852d1096915716ba8c33dcca1ec50c73244d0823b9ff6d00000000fd7d0d0800000000000000002079be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f817984c807bb52d7a9fef58323eb1bf7a407db382d2f3f2d81bb1224f49fe518f6d48d37c7bb52d7a9fef58323eb1bf7a407db382d2f3f2d81bb1224f49fe518f6d48d37c79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f8179879be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f8179842f40a48df4b2a70c8b4924bf2654661ed3d95fd66a313eb87237597c628e4a031f40a48df4b2a70c8b4924bf2654661ed3d95fd66a313eb87237597c628e4a0310000246b2dd1ec64d94d1eb204a8f7f55119bf73e9872d8408d3e4b393592c5c72ee45000000000400752b7d0002f401000128790128790128790128790128790128790128790128790128790128790128790128790128790128790113795e797e5d797e5c797e5b797e5a797e59797e58797e57797e56797e55797e54797e53797ea8011579787ea85279017f9f695279009c6301006752796878557952797e8801187955797e54798b7e6b6d6d6d6d6d6d6d6d6c775879ad011a79011a79011a79011a79011a79011a79011a79011a79011a79011a79013079012b795b795b795b795b795b795b790056766b796c756e7e777755766b796c756e7e777754766b796c756e7e777753766b796c756e7e777752766b796c756e7e777751766b796c756e7e7b756b6d6d6d6c77a852798855796e760087630100776876030000007e527987777777695479537978760087630100776876030000007e527987777777695b795b795b795b795b795b79565c797600a26976569f69948c766b796c756b6d6d6d6c547954797e886d6d6d6d6d6d607960796079607960796079012a795679567956795679567956790056766b796c756e827752797e7e777755766b796c756e827752797e7e777754766b796c756e827752797e7e777753766b796c756e827752797e7e777752766b796c756e827752797e7e777751766b796c756e827752797e7e7b756b6d6d6d6c77a878886d6d6d75015d79015d79015d79015d79015d79015d79016679016679016679786351670100685379787e52797ea96b6d6d6c014e79014e79014e79014e79014e79014e7956007600a26976569f69948c766b796c756b6d6d6d6c011b795879066a1863617401787e77527988577957795779577957795d79007657766b796c75a97e7d7756766b796c75a97e7d7755766b796c75a97e7d7754766b796c75a97e7d7753766b796c75a97e7d77a95279876b6d6d6d6c77695279587958795879587958795557798c7600a26976559f69948c766b796c756b6d6d756c886d6d6d6d75600115797600a26976569f6994766b796c750113790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790135790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790116790116797e7601167901167901167901167901167901167955766b796c756b6d6d6d6c7e7d7701167901167901167901167901167901167954766b796c756b6d6d6d6c7e7d7701167901167901167901167901167901167953766b796c756b6d6d6d6c7e7d7701167901167901167901167901167901167952766b796c756b6d6d6d6c7e7d7701167901167901167901167901167901167951766b796c756b6d6d6d6c7e7d7701167901167901167901167901167901167900766b796c756b6d6d6d6c7e7d775f797e775f795f79885d795d795d795d795d795d7955766b796c756b6d6d6d6c58795879587958795879587955766b796c756b6d6d6d6c768277000113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7954766b796c756b6d6d6d6c58795879587958795879587954766b796c756b6d6d6d6c768277510113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7953766b796c756b6d6d6d6c58795879587958795879587953766b796c756b6d6d6d6c768277520113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7952766b796c756b6d6d6d6c58795879587958795879587952766b796c756b6d6d6d6c768277530113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7951766b796c756b6d6d6d6c58795879587958795879587951766b796c756b6d6d6d6c768277540113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7900766b796c756b6d6d6d6c58795879587958795879587900766b796c756b6d6d6d6c768277550113799f637052797e53797e7e547a7572537a537975686d787752797eaa6b6d6d6d6d6d6d6d6d6d6d6d6d6c88011979011979011979011979707e01007e787e6b6d6d6c012f79012f79012f79012f79012f79012f7956011d797600a26976569f69948c766b796c756b6d6d6d6c8801177901197978760087630100776876030000007e527987777777690119790119797e7653798764011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579012d79012c79011679011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579007601147901147901147901147953766b796c756b6d6d6c7e7d7701147901147901147901147952766b796c756b6d6d6c7e7d7701147901147901147901147951766b796c756b6d6d6c7e7d7701147901147901147901147900766b796c756b6d6d6c7e775f795f79885d795d795d795d795d795d7955766b796c756b6d6d6d6c58795879587958795879587955766b796c756b6d6d6d6c768277000113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7954766b796c756b6d6d6d6c58795879587958795879587954766b796c756b6d6d6d6c768277510113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7953766b796c756b6d6d6d6c58795879587958795879587953766b796c756b6d6d6d6c768277520113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7952766b796c756b6d6d6d6c58795879587958795879587952766b796c756b6d6d6d6c768277530113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7951766b796c756b6d6d6d6c58795879587958795879587951766b796c756b6d6d6d6c768277540113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7900766b796c756b6d6d6d6c58795879587958795879587900766b796c756b6d6d6d6c768277550113799f637052797e53797e7e547a7572537a537975686d787752797eaa6b6d6d6d6d6d6d6d6d6d6d6c5379885979597959795979597959795658797600a26976569f69948c766b796c756b6d6d6d6c78886d6d6d6d6d6d6d6d6d6d6d686d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d7500000000016c766b796c787700a0636e937b757c52798b537a757b7b52797554795679016a7978827d770122a1696e7e53797e7777777e557a75547a547a547a547a5479755379016779515379786351670100685379787e52797ea96b6d6d6ca97e547a7572537a5379756875016c8c766b796c787700a0636e937b757c52798b537a757b7b52797554795679016a7978827d770122a1696e7e53797e7777777e557a75547a547a547a547a5479755379016779515379786351670100685379787e52797ea96b6d6d6ca97e547a7572537a537975687500016e7900a06378016f79937b757c52798b537a757b7b527975537901707901707978827701149d6e7ea97777a97e547a7572537a53797501667901687978827d770122a1696e7e53797e6b6d6d6c6801657964587900a067006863016b79016b797ea9577988016979016b79ad780165795a79939d59790165795a79939d016e7959799d67780165799d016e795879a169687001767901767901767901767901767956795679557894000052799f637600a97e77685152799f637600a97e77685252799f637600a97e77685352799f637600a97e77685452799f637600a97e776877777ea9557955795579557955795579007657766b796c75a97e7d7756766b796c75a97e7d7755766b796c75a97e7d7754766b796c75a97e7d7753766b796c75a97e7d77a95279876b6d6d6d6c776976066a1863617401787e770800000000000000007882777e787e6b6d6d6d6d6c770111790111797601127987646e78827d770122a1696e7e53797e77777767006877777857797e53797e787ea876012c79876b6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6c21c050929b74c1a04954b78b4b6035e97a5e078a5a0f28ec96d547bfee9ace803ac00141dffdc7a5b335e09ead121c048fd53f65f1f97bffd1b0e3e9aaa4c1823751335840e30368e365d7ed7fd611b4ef0f78b532dc46b8f97dc18828dfadba46c3f10b0104000000'

        const tokenStr = '{"minterAddr":"bc1pqw9ncs4sna0ndh85ux5dhh9swueyjql23t4em8j0smywkqsngfmsn7gmua","tokenAddr":"bc1plhz9wf0desgz8t32xm67vay9hgdmrnwzjzujgg0k9883cfxxgkzs20qfd5","info":{"max":"21000000","name":"cat","limit":"5","symbol":"CAT","premine":"0","decimals":2,"minterMd5":"21cbd2e538f2b6cc40ee180e174f1e25"},"tokenId":"45ee725c2c5993b3e4d308842d87e973bf1951f5f7a804b21e4dd964ecd12d6b_0","revealTxid":"9a3fcb5a8344f53f2ba580f7d488469346bff9efe7780fbbf8d3490e3a3a0cd7","revealHeight":6540,"genesisTxid":"45ee725c2c5993b3e4d308842d87e973bf1951f5f7a804b21e4dd964ecd12d6b","name":"cat","symbol":"CAT","decimals":2,"minterPubKey":"038b3c42b09f5f36dcf4e1a8dbdcb077324903ea8aeb9d9e4f86c8eb02134277","tokenPubKey":"fdc45725edcc1023ae2a36f5e67485ba1bb1cdc290b92421f629cf1c24c64585"}';

        const metadata = tokenInfoParse(tokenStr, SupportedNetwork.fractalMainnet)

        const valid = validatePrevTx(metadata,prevTxHex, prevPrevTxHex, SupportedNetwork.fractalMainnet)
        console.log(valid)
        expect(valid).toBe(true)

    })

    test("validate prevtx fail", async () => {
        // tx - 80ea11690349ddb6b554f2f7be40905d0b2ed4d0ac272b752aa52c3ee5dc6e58
        const prevTxHex = '020000000001024ee531a4541fd82e9850cfa279a4e3b3db8ee113fe9130ef733a68f86817c3370200000000ffffffff249614df8a4b8374f045294a1c7f816bf57f5d90f6aa051a017fceb4eb960a2f0200000000ffffffff0200000000000000001a6a18636174018d6d9e2fdf9c5312628bae72c120ef659e1eee184a01000000000000225120fdc45725edcc1023ae2a36f5e67485ba1bb1cdc290b92421f629cf1c24c645856814b21d642f5efa4da5070fffdb9b8773f5fdc39fb0000000001483587562c89dd70c0bed2e9c6197b5e59849814802f40100000020729c539e5d1853ee8ae99c479a30852d1096915716ba8c33dcca1ec50c73244d401528e3892f34ca76c8fd2edfc69e6e2701a917e540cdc6e7aee7cb03e92671e7169f18e41fb97af414aa25aec6482953b03770d9c795c6a28ce1c88082b99bc6084a01000000000000084a01000000000000225120fdc45725edcc1023ae2a36f5e67485ba1bb1cdc290b92421f629cf1c24c64585010102f4011466e0d4c0f89e47add4aec78b645b8108e9b521071406a50e41bf409707635fcb70acab553ebeb04d271406a50e41bf409707635fcb70acab553ebeb04d2714fde77ec9f0ba821e1f4fa98bc8c58367a7d0b0d100000402000000010229d5564b8ec1c3b986ca84bfddea489b828aec5aa790850977be4697f1620b13470100000000ffffffff292199efbe14e624c7dc765721ca9237f3396ff37cd90c7d2fb4bad5eddc35ccaa0400000000ffffffff0000000001050105080000000000000000084b01000000000000084b01000000000000084a010000000000000823b9ff6d00000000001a6a186361740166e0d4c0f89e47add4aec78b645b8108e9b52107225120038b3c42b09f5f36dcf4e1a8dbdcb077324903ea8aeb9d9e4f86c8eb02134277225120038b3c42b09f5f36dcf4e1a8dbdcb077324903ea8aeb9d9e4f86c8eb02134277225120fdc45725edcc1023ae2a36f5e67485ba1bb1cdc290b92421f629cf1c24c64585225120729c539e5d1853ee8ae99c479a30852d1096915716ba8c33dcca1ec50c73244d00040400000020d5564b8ec1c3b986ca84bfddea489b828aec5aa790850977be4697f1620b13470401000000010104ffffffff005002000000025440a011ec94587a416c68ca8b5560b6f31dd0fabe6a26e1a83ea8837674994a0100000000ffffffff95340e0580a9af034de10d3a9147840043e5016439a3813eb061519f7680972e000008000000ffffffff04000001040104080000000000000000084a01000000000000084a01000000000000084a0100000000000000001a6a186361740175a3d0e514234e731b8aec8864b076c1464ce8b8225120038b3c42b09f5f36dcf4e1a8dbdcb077324903ea8aeb9d9e4f86c8eb02134277225120038b3c42b09f5f36dcf4e1a8dbdcb077324903ea8aeb9d9e4f86c8eb02134277225120fdc45725edcc1023ae2a36f5e67485ba1bb1cdc290b92421f629cf1c24c64585000004000000000402000000040300000020e929c3abc581467fc3c19960cc01d97203cdc6fa85f80a0ac2f5dac603a601aa206627a839ec5f98ee3ad441de7a4f026beedd6f51abc8e1a2a0416be6a2b518e920b81d57fa29cec4f257a237eca5bdae5590a19141689d8e6fd1b9b8ffa39176cd2012a3ae445661ce5dee78d0650d33362dec29c4f82af05e7e57fb595bbbacf0ca20d8462f69359583c29edad138fd81e92c44175a9b963adf1034c03980be310d9601020400000000206a1217adb91583bef6ec8b1212b3cc85e4918b4058fcc593d05240ccd3eb12f3010004ffffffff1f67832bc8faa3afcfad5d7720be3f9060efc2135d7f43e960eb7a711f5da5e70123244ee531a4541fd82e9850cfa279a4e3b3db8ee113fe9130ef733a68f86817c3370200000024249614df8a4b8374f045294a1c7f816bf57f5d90f6aa051a017fceb4eb960a2f0200000000000000000102204ee531a4541fd82e9850cfa279a4e3b3db8ee113fe9130ef733a68f86817c3370402000000225120038b3c42b09f5f36dcf4e1a8dbdcb077324903ea8aeb9d9e4f86c8eb0213427716001403e7682bdad6936821efb8edf37c3001ce8004960000000000080000000000000000fd7d0d0800000000000000002079be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f817984c807bb52d7a9fef58323eb1bf7a407db382d2f3f2d81bb1224f49fe518f6d48d37c7bb52d7a9fef58323eb1bf7a407db382d2f3f2d81bb1224f49fe518f6d48d37c79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f8179879be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f8179842f40a48df4b2a70c8b4924bf2654661ed3d95fd66a313eb87237597c628e4a031f40a48df4b2a70c8b4924bf2654661ed3d95fd66a313eb87237597c628e4a0310000246b2dd1ec64d94d1eb204a8f7f55119bf73e9872d8408d3e4b393592c5c72ee45000000000400752b7d0002f401000128790128790128790128790128790128790128790128790128790128790128790128790128790128790113795e797e5d797e5c797e5b797e5a797e59797e58797e57797e56797e55797e54797e53797ea8011579787ea85279017f9f695279009c6301006752796878557952797e8801187955797e54798b7e6b6d6d6d6d6d6d6d6d6c775879ad011a79011a79011a79011a79011a79011a79011a79011a79011a79011a79013079012b795b795b795b795b795b795b790056766b796c756e7e777755766b796c756e7e777754766b796c756e7e777753766b796c756e7e777752766b796c756e7e777751766b796c756e7e7b756b6d6d6d6c77a852798855796e760087630100776876030000007e527987777777695479537978760087630100776876030000007e527987777777695b795b795b795b795b795b79565c797600a26976569f69948c766b796c756b6d6d6d6c547954797e886d6d6d6d6d6d607960796079607960796079012a795679567956795679567956790056766b796c756e827752797e7e777755766b796c756e827752797e7e777754766b796c756e827752797e7e777753766b796c756e827752797e7e777752766b796c756e827752797e7e777751766b796c756e827752797e7e7b756b6d6d6d6c77a878886d6d6d75015d79015d79015d79015d79015d79015d79016679016679016679786351670100685379787e52797ea96b6d6d6c014e79014e79014e79014e79014e79014e7956007600a26976569f69948c766b796c756b6d6d6d6c011b795879066a1863617401787e77527988577957795779577957795d79007657766b796c75a97e7d7756766b796c75a97e7d7755766b796c75a97e7d7754766b796c75a97e7d7753766b796c75a97e7d77a95279876b6d6d6d6c77695279587958795879587958795557798c7600a26976559f69948c766b796c756b6d6d756c886d6d6d6d75600115797600a26976569f6994766b796c750113790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790135790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790116790116797e7601167901167901167901167901167901167955766b796c756b6d6d6d6c7e7d7701167901167901167901167901167901167954766b796c756b6d6d6d6c7e7d7701167901167901167901167901167901167953766b796c756b6d6d6d6c7e7d7701167901167901167901167901167901167952766b796c756b6d6d6d6c7e7d7701167901167901167901167901167901167951766b796c756b6d6d6d6c7e7d7701167901167901167901167901167901167900766b796c756b6d6d6d6c7e7d775f797e775f795f79885d795d795d795d795d795d7955766b796c756b6d6d6d6c58795879587958795879587955766b796c756b6d6d6d6c768277000113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7954766b796c756b6d6d6d6c58795879587958795879587954766b796c756b6d6d6d6c768277510113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7953766b796c756b6d6d6d6c58795879587958795879587953766b796c756b6d6d6d6c768277520113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7952766b796c756b6d6d6d6c58795879587958795879587952766b796c756b6d6d6d6c768277530113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7951766b796c756b6d6d6d6c58795879587958795879587951766b796c756b6d6d6d6c768277540113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7900766b796c756b6d6d6d6c58795879587958795879587900766b796c756b6d6d6d6c768277550113799f637052797e53797e7e547a7572537a537975686d787752797eaa6b6d6d6d6d6d6d6d6d6d6d6d6d6c88011979011979011979011979707e01007e787e6b6d6d6c012f79012f79012f79012f79012f79012f7956011d797600a26976569f69948c766b796c756b6d6d6d6c8801177901197978760087630100776876030000007e527987777777690119790119797e7653798764011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579012d79012c79011679011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579007601147901147901147901147953766b796c756b6d6d6c7e7d7701147901147901147901147952766b796c756b6d6d6c7e7d7701147901147901147901147951766b796c756b6d6d6c7e7d7701147901147901147901147900766b796c756b6d6d6c7e775f795f79885d795d795d795d795d795d7955766b796c756b6d6d6d6c58795879587958795879587955766b796c756b6d6d6d6c768277000113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7954766b796c756b6d6d6d6c58795879587958795879587954766b796c756b6d6d6d6c768277510113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7953766b796c756b6d6d6d6c58795879587958795879587953766b796c756b6d6d6d6c768277520113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7952766b796c756b6d6d6d6c58795879587958795879587952766b796c756b6d6d6d6c768277530113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7951766b796c756b6d6d6d6c58795879587958795879587951766b796c756b6d6d6d6c768277540113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7900766b796c756b6d6d6d6c58795879587958795879587900766b796c756b6d6d6d6c768277550113799f637052797e53797e7e547a7572537a537975686d787752797eaa6b6d6d6d6d6d6d6d6d6d6d6c5379885979597959795979597959795658797600a26976569f69948c766b796c756b6d6d6d6c78886d6d6d6d6d6d6d6d6d6d6d686d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d7500000000016c766b796c787700a0636e937b757c52798b537a757b7b52797554795679016a7978827d770122a1696e7e53797e7777777e557a75547a547a547a547a5479755379016779515379786351670100685379787e52797ea96b6d6d6ca97e547a7572537a5379756875016c8c766b796c787700a0636e937b757c52798b537a757b7b52797554795679016a7978827d770122a1696e7e53797e7777777e557a75547a547a547a547a5479755379016779515379786351670100685379787e52797ea96b6d6d6ca97e547a7572537a537975687500016e7900a06378016f79937b757c52798b537a757b7b527975537901707901707978827701149d6e7ea97777a97e547a7572537a53797501667901687978827d770122a1696e7e53797e6b6d6d6c6801657964587900a067006863016b79016b797ea9577988016979016b79ad780165795a79939d59790165795a79939d016e7959799d67780165799d016e795879a169687001767901767901767901767901767956795679557894000052799f637600a97e77685152799f637600a97e77685252799f637600a97e77685352799f637600a97e77685452799f637600a97e776877777ea9557955795579557955795579007657766b796c75a97e7d7756766b796c75a97e7d7755766b796c75a97e7d7754766b796c75a97e7d7753766b796c75a97e7d77a95279876b6d6d6d6c776976066a1863617401787e770800000000000000007882777e787e6b6d6d6d6d6c770111790111797601127987646e78827d770122a1696e7e53797e77777767006877777857797e53797e787ea876012c79876b6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6c21c050929b74c1a04954b78b4b6035e97a5e078a5a0f28ec96d547bfee9ace803ac002473044022034c5638fe0a43e87066e27f8bb2e2e5cfddf7c4e7458d9e0b3c2a6ec7d4513ad0220310744796f0e4805f35ece8b162c889eed5ed9aa6bc9aa589c663087c8f2b6eb01210274cce31a302f5545f2e7469e95babc867be6d90248789d6f2e0ff15934c0226d03000000'

        // guard (fail) - aacc35dcedd5bab42f7d0cd97cf36f39f33792ca215776dcc724e614beef9921
        const prevPrevTxHex = '020000000001023af73d29975ecbfa57bdfc3ec6d21eca6cf44afff63177030e8644f7a0cc62ee0100000000ffffffff1bdc2f4836d7273e06ef5bc8d18408ec296ac8f798c8339526e20501518ad42d0200000000ffffffff0500000000000000001a6a186361740166e0d4c0f89e47add4aec78b645b8108e9b521074b01000000000000225120038b3c42b09f5f36dcf4e1a8dbdcb077324903ea8aeb9d9e4f86c8eb021342774b01000000000000225120038b3c42b09f5f36dcf4e1a8dbdcb077324903ea8aeb9d9e4f86c8eb021342774a01000000000000225120fdc45725edcc1023ae2a36f5e67485ba1bb1cdc290b92421f629cf1c24c6458549936a6e00000000225120729c539e5d1853ee8ae99c479a30852d1096915716ba8c33dcca1ec50c73244d681406a50e41bf409707635fcb70acab553ebeb04d271406a50e41bf409707635fcb70acab553ebeb04d2714fde77ec9f0ba821e1f4fa98bc8c58367a7d0b0d10000148ab96d0bb79a714d80f736dd6f18ceb69b9ef36e02f40102f40102f4010020729c539e5d1853ee8ae99c479a30852d1096915716ba8c33dcca1ec50c73244d40ef0ae267f4ea8885585aed98e9e73a8913e6c61d2bbef4de9908b005aa32eea06592d3d1ef0c98b387685c27b4d7a320ace44fe6f581477feb2b55d514bd5de5084b01000000000000084a01000000000000225120fdc45725edcc1023ae2a36f5e67485ba1bb1cdc290b92421f629cf1c24c64585010102dc051422170ae549dd3e0c7e3619f8e5d3d45d997fc38414ac6735480c0ea83b72a9042958a58783f0baa63514ac6735480c0ea83b72a9042958a58783f0baa6351411764b969271f713f9c232c12e4380aded8499f700000402000000010229b897e5e0e52266fa5c02d8cd624d84f3c391147737b3b161646b83344f2972c10100000000ffffffff29f26470332fc3b2e905ab14a6a7e697b6e9dedb891e84e5390610513277b748e71000000000ffffffff0000000001040104080000000000000000084a01000000000000084a01000000000000084a0100000000000000001a6a186361740122170ae549dd3e0c7e3619f8e5d3d45d997fc384225120038b3c42b09f5f36dcf4e1a8dbdcb077324903ea8aeb9d9e4f86c8eb02134277225120038b3c42b09f5f36dcf4e1a8dbdcb077324903ea8aeb9d9e4f86c8eb02134277225120fdc45725edcc1023ae2a36f5e67485ba1bb1cdc290b92421f629cf1c24c645850000040500000020b897e5e0e52266fa5c02d8cd624d84f3c391147737b3b161646b83344f2972c10401000000010104ffffffff0050020000000259ac6ed7b1dcf0e5e186298b21a5497ba6cf9193616206618163808cf2b94b7c0200000000ffffffffd23437b159bedb5a9de3ced260cf343e93dafa1c14e6fc7b2cc31a2655348c72040008000000ffffffff05000001050105080000000000000000084b01000000000000084b01000000000000084a0100000000000008df5ca50b00000000001a6a1863617401e0ceb08587c8d9c1a7c1c7e3c06dd3620068b500225120038b3c42b09f5f36dcf4e1a8dbdcb077324903ea8aeb9d9e4f86c8eb02134277225120038b3c42b09f5f36dcf4e1a8dbdcb077324903ea8aeb9d9e4f86c8eb02134277225120fdc45725edcc1023ae2a36f5e67485ba1bb1cdc290b92421f629cf1c24c645852251209fd89fd7931a0741512a7969d6afd23b9422ef4c960e5e3215c8f6f29707f6060004000000000402000000040000000020df148b269a9cc449fc900e37ede8ac3288b993513c8cc5b51d85cb4fd212e6de203998a6ff0345dfa2bbf43e87b4e6b75a8300003bef2aaf36fc15617994025f8320edd566a7e127b50b8f19c95a4c0667025ef1b4224180e03f96c3675f3df37ff82012a3ae445661ce5dee78d0650d33362dec29c4f82af05e7e57fb595bbbacf0ca2038455cdd40c74f3889f7533be9c50259cd833c0649f58ef9e6abb6ab30a46cc101020400000000206a1217adb91583bef6ec8b1212b3cc85e4918b4058fcc593d05240ccd3eb12f3010004ffffffff1fa680d0bcddca9c2619fe1e6f787cbec89f6bf969127e192ed0ee96e6add98b0162243af73d29975ecbfa57bdfc3ec6d21eca6cf44afff63177030e8644f7a0cc62ee01000000241bdc2f4836d7273e06ef5bc8d18408ec296ac8f798c8339526e20501518ad42d0200000000000000000101203af73d29975ecbfa57bdfc3ec6d21eca6cf44afff63177030e8644f7a0cc62ee0401000000225120038b3c42b09f5f36dcf4e1a8dbdcb077324903ea8aeb9d9e4f86c8eb02134277225120729c539e5d1853ee8ae99c479a30852d1096915716ba8c33dcca1ec50c73244d00000000225120729c539e5d1853ee8ae99c479a30852d1096915716ba8c33dcca1ec50c73244d0849936a6e00000000fd7d0d0800000000000000002079be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f817984c807bb52d7a9fef58323eb1bf7a407db382d2f3f2d81bb1224f49fe518f6d48d37c7bb52d7a9fef58323eb1bf7a407db382d2f3f2d81bb1224f49fe518f6d48d37c79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f8179879be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f8179842f40a48df4b2a70c8b4924bf2654661ed3d95fd66a313eb87237597c628e4a031f40a48df4b2a70c8b4924bf2654661ed3d95fd66a313eb87237597c628e4a0310000246b2dd1ec64d94d1eb204a8f7f55119bf73e9872d8408d3e4b393592c5c72ee45000000000400752b7d0002f401000128790128790128790128790128790128790128790128790128790128790128790128790128790128790113795e797e5d797e5c797e5b797e5a797e59797e58797e57797e56797e55797e54797e53797ea8011579787ea85279017f9f695279009c6301006752796878557952797e8801187955797e54798b7e6b6d6d6d6d6d6d6d6d6c775879ad011a79011a79011a79011a79011a79011a79011a79011a79011a79011a79013079012b795b795b795b795b795b795b790056766b796c756e7e777755766b796c756e7e777754766b796c756e7e777753766b796c756e7e777752766b796c756e7e777751766b796c756e7e7b756b6d6d6d6c77a852798855796e760087630100776876030000007e527987777777695479537978760087630100776876030000007e527987777777695b795b795b795b795b795b79565c797600a26976569f69948c766b796c756b6d6d6d6c547954797e886d6d6d6d6d6d607960796079607960796079012a795679567956795679567956790056766b796c756e827752797e7e777755766b796c756e827752797e7e777754766b796c756e827752797e7e777753766b796c756e827752797e7e777752766b796c756e827752797e7e777751766b796c756e827752797e7e7b756b6d6d6d6c77a878886d6d6d75015d79015d79015d79015d79015d79015d79016679016679016679786351670100685379787e52797ea96b6d6d6c014e79014e79014e79014e79014e79014e7956007600a26976569f69948c766b796c756b6d6d6d6c011b795879066a1863617401787e77527988577957795779577957795d79007657766b796c75a97e7d7756766b796c75a97e7d7755766b796c75a97e7d7754766b796c75a97e7d7753766b796c75a97e7d77a95279876b6d6d6d6c77695279587958795879587958795557798c7600a26976559f69948c766b796c756b6d6d756c886d6d6d6d75600115797600a26976569f6994766b796c750113790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790159790135790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790116790116797e7601167901167901167901167901167901167955766b796c756b6d6d6d6c7e7d7701167901167901167901167901167901167954766b796c756b6d6d6d6c7e7d7701167901167901167901167901167901167953766b796c756b6d6d6d6c7e7d7701167901167901167901167901167901167952766b796c756b6d6d6d6c7e7d7701167901167901167901167901167901167951766b796c756b6d6d6d6c7e7d7701167901167901167901167901167901167900766b796c756b6d6d6d6c7e7d775f797e775f795f79885d795d795d795d795d795d7955766b796c756b6d6d6d6c58795879587958795879587955766b796c756b6d6d6d6c768277000113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7954766b796c756b6d6d6d6c58795879587958795879587954766b796c756b6d6d6d6c768277510113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7953766b796c756b6d6d6d6c58795879587958795879587953766b796c756b6d6d6d6c768277520113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7952766b796c756b6d6d6d6c58795879587958795879587952766b796c756b6d6d6d6c768277530113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7951766b796c756b6d6d6d6c58795879587958795879587951766b796c756b6d6d6d6c768277540113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7900766b796c756b6d6d6d6c58795879587958795879587900766b796c756b6d6d6d6c768277550113799f637052797e53797e7e547a7572537a537975686d787752797eaa6b6d6d6d6d6d6d6d6d6d6d6d6d6c88011979011979011979011979707e01007e787e6b6d6d6c012f79012f79012f79012f79012f79012f7956011d797600a26976569f69948c766b796c756b6d6d6d6c8801177901197978760087630100776876030000007e527987777777690119790119797e7653798764011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579012d79012c79011679011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579011579007601147901147901147901147953766b796c756b6d6d6c7e7d7701147901147901147901147952766b796c756b6d6d6c7e7d7701147901147901147901147951766b796c756b6d6d6c7e7d7701147901147901147901147900766b796c756b6d6d6c7e775f795f79885d795d795d795d795d795d7955766b796c756b6d6d6d6c58795879587958795879587955766b796c756b6d6d6d6c768277000113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7954766b796c756b6d6d6d6c58795879587958795879587954766b796c756b6d6d6d6c768277510113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7953766b796c756b6d6d6d6c58795879587958795879587953766b796c756b6d6d6d6c768277520113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7952766b796c756b6d6d6d6c58795879587958795879587952766b796c756b6d6d6d6c768277530113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7951766b796c756b6d6d6d6c58795879587958795879587951766b796c756b6d6d6d6c768277540113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7900766b796c756b6d6d6d6c58795879587958795879587900766b796c756b6d6d6d6c768277550113799f637052797e53797e7e547a7572537a537975686d787752797eaa6b6d6d6d6d6d6d6d6d6d6d6c5379885979597959795979597959795658797600a26976569f69948c766b796c756b6d6d6d6c78886d6d6d6d6d6d6d6d6d6d6d686d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d7500000000016c766b796c787700a0636e937b757c52798b537a757b7b52797554795679016a7978827d770122a1696e7e53797e7777777e557a75547a547a547a547a5479755379016779515379786351670100685379787e52797ea96b6d6d6ca97e547a7572537a5379756875016c8c766b796c787700a0636e937b757c52798b537a757b7b52797554795679016a7978827d770122a1696e7e53797e7777777e557a75547a547a547a547a5479755379016779515379786351670100685379787e52797ea96b6d6d6ca97e547a7572537a537975687500016e7900a06378016f79937b757c52798b537a757b7b527975537901707901707978827701149d6e7ea97777a97e547a7572537a53797501667901687978827d770122a1696e7e53797e6b6d6d6c6801657964587900a067006863016b79016b797ea9577988016979016b79ad780165795a79939d59790165795a79939d016e7959799d67780165799d016e795879a169687001767901767901767901767901767956795679557894000052799f637600a97e77685152799f637600a97e77685252799f637600a97e77685352799f637600a97e77685452799f637600a97e776877777ea9557955795579557955795579007657766b796c75a97e7d7756766b796c75a97e7d7755766b796c75a97e7d7754766b796c75a97e7d7753766b796c75a97e7d77a95279876b6d6d6d6c776976066a1863617401787e770800000000000000007882777e787e6b6d6d6d6d6c770111790111797601127987646e78827d770122a1696e7e53797e77777767006877777857797e53797e787ea876012c79876b6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6c21c050929b74c1a04954b78b4b6035e97a5e078a5a0f28ec96d547bfee9ace803ac00141dc8735278b667293a4d2e78806b5a17deef0a2c2f6fc034f29a7bc49e7f3066d7bf694edcf6c4c449605cab6ccf1fad6cfa2171456060ff4dadbdfdca53bfc540100000000'

        const tokenStr = '{"minterAddr":"bc1pqw9ncs4sna0ndh85ux5dhh9swueyjql23t4em8j0smywkqsngfmsn7gmua","tokenAddr":"bc1plhz9wf0desgz8t32xm67vay9hgdmrnwzjzujgg0k9883cfxxgkzs20qfd5","info":{"max":"21000000","name":"cat","limit":"5","symbol":"CAT","premine":"0","decimals":2,"minterMd5":"21cbd2e538f2b6cc40ee180e174f1e25"},"tokenId":"45ee725c2c5993b3e4d308842d87e973bf1951f5f7a804b21e4dd964ecd12d6b_0","revealTxid":"9a3fcb5a8344f53f2ba580f7d488469346bff9efe7780fbbf8d3490e3a3a0cd7","revealHeight":6540,"genesisTxid":"45ee725c2c5993b3e4d308842d87e973bf1951f5f7a804b21e4dd964ecd12d6b","name":"cat","symbol":"CAT","decimals":2,"minterPubKey":"038b3c42b09f5f36dcf4e1a8dbdcb077324903ea8aeb9d9e4f86c8eb02134277","tokenPubKey":"fdc45725edcc1023ae2a36f5e67485ba1bb1cdc290b92421f629cf1c24c64585"}';

        const metadata = tokenInfoParse(tokenStr, SupportedNetwork.fractalMainnet)

        const valid = validatePrevTx(metadata,prevTxHex, prevPrevTxHex, SupportedNetwork.fractalMainnet)
        console.log(valid)
        expect(valid).toBe(false)


    })
})
;

