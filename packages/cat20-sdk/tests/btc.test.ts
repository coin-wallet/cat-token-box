import {EcKeyService} from "../src/utils/eckey";
import {AddressType, btc} from "../src/common";
import {ownerAddressToPubKeyHash} from "@cat-protocol/cat-tracker/dist/common/utils";
import {hash160} from "scrypt-ts";

describe("bitcoin", () => {
    test("wallet service", async () => {
        const privateKey = "L37qpvGk4vqKd3iBMAvaCNfgVJQKpc6qebKeAVk4BCpc9vy42dW7"
        const eckey = new EcKeyService(privateKey, AddressType.P2TR)
        console.info(eckey.getWif())
        console.info(eckey.getAddress().toString())
    })

    test('decode token owner addresses and amounts', async ()=> {
        const txhex = '02000000000103c012e506eeeb9e071bfce6451233f9a4a66a2ad4e421c198f6827382625b6fff0300000000fffffffff7d90b7579358ead31e53833e0928ad56c02173cd7b6df67f70e8c3cef35e1fb0100000000fffffffff7d90b7579358ead31e53833e0928ad56c02173cd7b6df67f70e8c3cef35e1fb0200000000ffffffff0400000000000000001a6a1863617401d88e27095c7ec66b7adb8f76101248b7110941b24a01000000000000225120a596af59a76c7494130948429535f7bf58045753ecd9bb2a8707da8009038ed04a01000000000000225120a596af59a76c7494130948429535f7bf58045753ecd9bb2a8707da8009038ed018dc7a1000000000225120991aa7dd18daf34865086c8a7c134ac83bee0fc9217ec346d138247a2d6e69827101010020991aa7dd18daf34865086c8a7c134ac83bee0fc9217ec346d138247a2d6e69824005ce9f76c8cc3e1e3cd46b23cae4b6d73db418ae1b4d2aab398b2582b82da5965aa8ad43be17b6381aa4acbde40dfc06494ac1e5df303979f69fcce9c13e824d0014c356c0b7212408fa4a4d8a7ee59e48f729cb1b1f02e80314850759062665ac381528ad7e0bf09b0332fdeb401482fe99bdc279e395167143d68168258688098fcc147d345c05948faa2a06fb254c39bae38f53fc36dc1444876a0c881ea808e71b0ba8ef75b82dc1f64a9c00002f0200000001c012e506eeeb9e071bfce6451233f9a4a66a2ad4e421c198f6827382625b6fff0400000000ffffffff0301030103080000000000000000084c0100000000000008c60baa1000000000001a6a1863617401ed2c2e9b72af0838c11697a4aaecbe3731420b8c22512052f5ec24681512889f765a3313b746a0e92b01df3f4e48404236906a1ff462fe225120991aa7dd18daf34865086c8a7c134ac83bee0fc9217ec346d138247a2d6e698200040000000001010401000000225120a596af59a76c7494130948429535f7bf58045753ecd9bb2a8707da8009038ed002e80300000000000402000000010229a87eaf4a5b1ebf008c1cfdafa570c057909a5068c92429a26e4c0ce84b96c8960200000000ffffffff299a746f295e2f23124dd9b6c8e405df680eb3efdfb593fb2932d99b55844711530200000000ffffffff0000000001050105080000000000000000084b01000000000000084b01000000000000084a01000000000000080383ad1000000000001a6a1863617401850759062665ac381528ad7e0bf09b0332fdeb402251206c1a0fda20c43cf6f2dbdcb193fcb7cc967d69939e7aad9554f194bf5b00ed3f2251206c1a0fda20c43cf6f2dbdcb193fcb7cc967d69939e7aad9554f194bf5b00ed3f225120a596af59a76c7494130948429535f7bf58045753ecd9bb2a8707da8009038ed0225120991aa7dd18daf34865086c8a7c134ac83bee0fc9217ec346d138247a2d6e698200040000000020a87eaf4a5b1ebf008c1cfdafa570c057909a5068c92429a26e4c0ce84b96c8960402000000010204ffffffff0050020000000267a498d85583173fe72c50d7e70e5b0fc479aff01cc5ae8c3eb80054a068a21d0100000000ffffffff1eed3674ad6fd388be17717d0fce3f28227ad7ffc1d43b44dc601b13e501e759040008000000ffffffff05000001050105080000000000000000084b01000000000000084b01000000000000084a0100000000000008e458460200000000001a6a18636174019cc27a2b16b040bed245a11301afb60a533e6c842251206c1a0fda20c43cf6f2dbdcb193fcb7cc967d69939e7aad9554f194bf5b00ed3f2251206c1a0fda20c43cf6f2dbdcb193fcb7cc967d69939e7aad9554f194bf5b00ed3f225120a596af59a76c7494130948429535f7bf58045753ecd9bb2a8707da8009038ed0225120b2cc03e567a1a217367e54beb419cc4df10e26bff703891e1764254edbdbc9210004010000000402000000040100000020d3720d42785730eb6aa300cfb74114236989e5a8a17fb17ea974fbc6b55438cc2082a3c6521e217768507e587b852addd53e9f7a2fbf6132bd7a127f9ba5daa12720b0a6143bf90e65102bfb65d9ced84e1d61c44e0dd363c450d15eb6a38a5c8ff5208688d249e9d047b4fc2fb89ce05afe9ec89252ffccdd969de6eef260dd7ffb2120641e023504d764f4ee0fd9c800346cd7a957ff523c55eacc5984b44a8f53209301020400000000201fa32943db953d33fc5bff1dccb62bbff728a99f1f72a16b939790e78d39f75a010004ffffffff1fd3198600884f21ad5764537fd5edd10f3e2e2fd6c9fd7c688178dc866ed169011324c012e506eeeb9e071bfce6451233f9a4a66a2ad4e421c198f6827382625b6fff0300000024f7d90b7579358ead31e53833e0928ad56c02173cd7b6df67f70e8c3cef35e1fb0100000024f7d90b7579358ead31e53833e0928ad56c02173cd7b6df67f70e8c3cef35e1fb0200000000000000010320c012e506eeeb9e071bfce6451233f9a4a66a2ad4e421c198f6827382625b6fff0403000000225120a596af59a76c7494130948429535f7bf58045753ecd9bb2a8707da8009038ed022512052f5ec24681512889f765a3313b746a0e92b01df3f4e48404236906a1ff462fe225120991aa7dd18daf34865086c8a7c134ac83bee0fc9217ec346d138247a2d6e6982000000fd5b0e2079be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f817984c807bb52d7a9fef58323eb1bf7a407db382d2f3f2d81bb1224f49fe518f6d48d37c7bb52d7a9fef58323eb1bf7a407db382d2f3f2d81bb1224f49fe518f6d48d37c79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f8179879be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f8179842f40a48df4b2a70c8b4924bf2654661ed3d95fd66a313eb87237597c628e4a031f40a48df4b2a70c8b4924bf2654661ed3d95fd66a313eb87237597c628e4a03100002251206c1a0fda20c43cf6f2dbdcb193fcb7cc967d69939e7aad9554f194bf5b00ed3f22512052f5ec24681512889f765a3313b746a0e92b01df3f4e48404236906a1ff462fe01227901227901227901227901227901227901227901227901227901227901227901227901227901227960795e797e5d797e5c797e5b797e5a797e59797e58797e57797e56797e55797e54797e53797ea8011279787ea85279017f9f695279009c6301006752796878557952797e8801157955797e54798b7e6b6d6d6d6d6d6d6d6d6c775579ad011479011479011479011479011479011479011479011479011479011479012a790125795b795b795b795b795b795b790056766b796c756e7e777755766b796c756e7e777754766b796c756e7e777753766b796c756e7e777752766b796c756e7e777751766b796c756e7e7b756b6d6d6d6c77a852798855796e760087630100776876030000007e527987777777695479537978760087630100776876030000007e527987777777695b795b795b795b795b795b79565c797600a26976569f69948c766b796c756b6d6d6d6c547954797e886d6d6d6d6d6d5a795a795a795a795a795a790124795679567956795679567956790056766b796c756e827752797e7e777755766b796c756e827752797e7e777754766b796c756e827752797e7e777753766b796c756e827752797e7e777752766b796c756e827752797e7e777751766b796c756e827752797e7e7b756b6d6d6d6c77a878886d6d6d75016c79016c79016c79016c79016c79016c7901747901747978827701149d6e7ea9777701487901487901487901487901487901487956007600a26976569f69948c766b796c756b6d6d6d6c0115795879066a1863617401787e77527988577957795779577957795d79007657766b796c75a97e7d7756766b796c75a97e7d7755766b796c75a97e7d7754766b796c75a97e7d7753766b796c75a97e7d77a95279876b6d6d6d6c77695279587958795879587958795557798c7600a26976559f69948c766b796c756b6d6d756c886d6d6d6d755a5f797600a26976569f6994766b796c755d790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790153790132790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790131790116790116797e7601167901167901167901167901167901167955766b796c756b6d6d6d6c7e7d7701167901167901167901167901167901167954766b796c756b6d6d6d6c7e7d7701167901167901167901167901167901167953766b796c756b6d6d6d6c7e7d7701167901167901167901167901167901167952766b796c756b6d6d6d6c7e7d7701167901167901167901167901167901167951766b796c756b6d6d6d6c7e7d7701167901167901167901167901167901167900766b796c756b6d6d6d6c7e7d775f797e775f795f79885d795d795d795d795d795d7955766b796c756b6d6d6d6c58795879587958795879587955766b796c756b6d6d6d6c768277000113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7954766b796c756b6d6d6d6c58795879587958795879587954766b796c756b6d6d6d6c768277510113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7953766b796c756b6d6d6d6c58795879587958795879587953766b796c756b6d6d6d6c768277520113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7952766b796c756b6d6d6d6c58795879587958795879587952766b796c756b6d6d6d6c768277530113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7951766b796c756b6d6d6d6c58795879587958795879587951766b796c756b6d6d6d6c768277540113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7900766b796c756b6d6d6d6c58795879587958795879587900766b796c756b6d6d6d6c768277550113799f637052797e53797e7e547a7572537a537975686d787752797eaa6b6d6d6d6d6d6d6d6d6d6d6d6d6c88011979011979011979011979707e01007e787e6b6d6d6c012f79012f79012f79012f79012f79012f7956011d797600a26976569f69948c766b796c756b6d6d6d6c8801177901197978760087630100776876030000007e52798777777769011479011479011479011479011479011479011479011479011479011479011479011479011479011479011479011479011479011479011479007601147901147901147901147953766b796c756b6d6d6c7e7d7701147901147901147901147952766b796c756b6d6d6c7e7d7701147901147901147901147951766b796c756b6d6d6c7e7d7701147901147901147901147900766b796c756b6d6d6c7e775f795f79885d795d795d795d795d795d7955766b796c756b6d6d6d6c58795879587958795879587955766b796c756b6d6d6d6c768277000113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7954766b796c756b6d6d6d6c58795879587958795879587954766b796c756b6d6d6d6c768277510113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7953766b796c756b6d6d6d6c58795879587958795879587953766b796c756b6d6d6d6c768277520113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7952766b796c756b6d6d6d6c58795879587958795879587952766b796c756b6d6d6d6c768277530113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7951766b796c756b6d6d6d6c58795879587958795879587951766b796c756b6d6d6d6c768277540113799f637052797e53797e7e547a7572537a537975686d755d795d795d795d795d795d7900766b796c756b6d6d6d6c58795879587958795879587900766b796c756b6d6d6d6c768277550113799f637052797e53797e7e547a7572537a537975686d787752797eaa6b6d6d6d6d6d6d6d6d6d6d6c011a798858795879587958795879587956011e797600a26976569f69948c766b796c756b6d6d6d6c7653798778537987786476675168696d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d750167790167790167790167790167790167790167790167790167790167790167790167790167790167790167790167790167790167790167790167790167790115790285007902850079012779012e79012e79012e79012e79012e79012e79012a79012a79012a79012a79012a79012a7901167901167901167901167901167901167901167956797657795779577957795779577955766b796c756b6d6d6d6c7e7d7757795779577957795779577954766b796c756b6d6d6d6c7e7d7757795779577957795779577953766b796c756b6d6d6d6c7e7d7757795779577957795779577952766b796c756b6d6d6d6c7e7d7757795779577957795779577951766b796c756b6d6d6d6c7e7d7757795779577957795779577900766b796c756b6d6d6d6c7e7d77a96b6d6d6d6d6c01177901117988765178a978557894000052799f637600a97e77685152799f637600a97e77685252799f637600a97e77685352799f637600a97e77685452799f637600a97e776877777ea9066a1863617401787e777777011f79011f79011f79011f7954007600a26976549f69948c766b796c756b6d6d6c885e7900a069011679011679011679011679011679011679560114797600a26976569f69948c766b796c756b6d6d6d6c5f799d0125790125790125790125790125790125790125790125790125790125790125790125795a795a798800597959795979597953766b796c756b6d6d6c567956795679567953766b796c756b6d6d6c768277005f799f637052797e53797e7e547a7572537a537975686d75597959795979597952766b796c756b6d6d6c567956795679567952766b796c756b6d6d6c768277515f799f637052797e53797e7e547a7572537a537975686d75597959795979597951766b796c756b6d6d6c567956795679567951766b796c756b6d6d6c768277525f799f637052797e53797e7e547a7572537a537975686d75597959795979597900766b796c756b6d6d6c567956795679567900766b796c756b6d6d6c768277535f799f637052797e53797e7e547a7572537a537975686d755c79787e52797eaa6b6d6d6d6d6d6d6c775d011b797600a26976569f6994766b796c7578011b797e8857011b797600a26976569f6994766b796c75012979886d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d75017479630173790173797ea901707988017179017379ad67016f795c0172797600a26976569f6994766b796c75a988686d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d755121c150929b74c1a04954b78b4b6035e97a5e078a5a0f28ec96d547bfee9ace803ac04d1436f88260fd6515320d51e0b8fbaabe530d1dfc4a1480f2b647b9f43732732b63629e45684eec8615a300000014c356c0b7212408fa4a4d8a7ee59e48f729cb1b1f14c356c0b7212408fa4a4d8a7ee59e48f729cb1b1f225120991aa7dd18daf34865086c8a7c134ac83bee0fc9217ec346d138247a2d6e69820000017b026d030000000101010100000000000818dc7a10000000000000084a01000000000000225120a596af59a76c7494130948429535f7bf58045753ecd9bb2a8707da8009038ed002e80300000000002f0200000001c012e506eeeb9e071bfce6451233f9a4a66a2ad4e421c198f6827382625b6fff0400000000ffffffff0301030103080000000000000000084c0100000000000008c60baa1000000000001a6a1863617401ed2c2e9b72af0838c11697a4aaecbe3731420b8c22512052f5ec24681512889f765a3313b746a0e92b01df3f4e48404236906a1ff462fe225120991aa7dd18daf34865086c8a7c134ac83bee0fc9217ec346d138247a2d6e69820004000000000402000000040100000020d3720d42785730eb6aa300cfb74114236989e5a8a17fb17ea974fbc6b55438cc2082a3c6521e217768507e587b852addd53e9f7a2fbf6132bd7a127f9ba5daa12720b0a6143bf90e65102bfb65d9ced84e1d61c44e0dd363c450d15eb6a38a5c8ff5208688d249e9d047b4fc2fb89ce05afe9ec89252ffccdd969de6eef260dd7ffb2120641e023504d764f4ee0fd9c800346cd7a957ff523c55eacc5984b44a8f53209301020401000000200847a5b72091bd429a8227461cfd62231a24d115be575b44bdf2fbb243805689010004ffffffff1f3325af3d31a726072631446f45ccd8c357c85fe19df1c6108ccb472bca742f013524c012e506eeeb9e071bfce6451233f9a4a66a2ad4e421c198f6827382625b6fff0300000024f7d90b7579358ead31e53833e0928ad56c02173cd7b6df67f70e8c3cef35e1fb0100000024f7d90b7579358ead31e53833e0928ad56c02173cd7b6df67f70e8c3cef35e1fb020000000000000101010120f7d90b7579358ead31e53833e0928ad56c02173cd7b6df67f70e8c3cef35e1fb0401000000225120a596af59a76c7494130948429535f7bf58045753ecd9bb2a8707da8009038ed022512052f5ec24681512889f765a3313b746a0e92b01df3f4e48404236906a1ff462fe225120991aa7dd18daf34865086c8a7c134ac83bee0fc9217ec346d138247a2d6e6982000000fd9d0a2079be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f817984c807bb52d7a9fef58323eb1bf7a407db382d2f3f2d81bb1224f49fe518f6d48d37c7bb52d7a9fef58323eb1bf7a407db382d2f3f2d81bb1224f49fe518f6d48d37c79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f8179879be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f8179842f40a48df4b2a70c8b4924bf2654661ed3d95fd66a313eb87237597c628e4a031f40a48df4b2a70c8b4924bf2654661ed3d95fd66a313eb87237597c628e4a03100000120790120790120790120790120790120790120790120790120790120790120790120790120790120795e795e797e5d797e5c797e5b797e5a797e59797e58797e57797e56797e55797e54797e53797ea86079787ea85279017f9f695279009c6301006752796878557952797e8801137955797e54798b7e6b6d6d6d6d6d6d6d6d6c775379ad0112790112790112790112790112790112790112790112790112790112790128790123795b795b795b795b795b795b790056766b796c756e7e777755766b796c756e7e777754766b796c756e7e777753766b796c756e7e777752766b796c756e7e777751766b796c756e7e7b756b6d6d6d6c77a852798855796e760087630100776876030000007e527987777777695479537978760087630100776876030000007e527987777777695b795b795b795b795b795b79565c797600a26976569f69948c766b796c756b6d6d6d6c547954797e886d6d6d6d6d6d5879587958795879587958790122795679567956795679567956790056766b796c756e827752797e7e777755766b796c756e827752797e7e777754766b796c756e827752797e7e777753766b796c756e827752797e7e777752766b796c756e827752797e7e777751766b796c756e827752797e7e7b756b6d6d6d6c77a878886d6d6d75012c79012c79012c79012c79012c79012c79012c79012c79012c79012c79012c79012c7901167901407901407901407901407901407901407901407956797657795779577957795779577955766b796c756b6d6d6d6c7e7d7757795779577957795779577954766b796c756b6d6d6d6c7e7d7757795779577957795779577953766b796c756b6d6d6d6c7e7d7757795779577957795779577952766b796c756b6d6d6d6c7e7d7757795779577957795779577951766b796c756b6d6d6d6c7e7d7757795779577957795779577900766b796c756b6d6d6d6c7e7d77a96b6d6d6d6d6c5d795d795d795d795d795d795d795d795d795d795d795d795a795a798800597959795979597953766b796c756b6d6d6c567956795679567953766b796c756b6d6d6c768277005f799f637052797e53797e7e547a7572537a537975686d75597959795979597952766b796c756b6d6d6c567956795679567952766b796c756b6d6d6c768277515f799f637052797e53797e7e547a7572537a537975686d75597959795979597951766b796c756b6d6d6c567956795679567951766b796c756b6d6d6c768277525f799f637052797e53797e7e547a7572537a537975686d75597959795979597900766b796c756b6d6d6c567956795679567900766b796c756b6d6d6c768277535f799f637052797e53797e7e547a7572537a537975686d755c79787e52797eaa6b6d6d6d6d6d6d6c77527988765178a978557894000052799f637600a97e77685152799f637600a97e77685252799f637600a97e77685352799f637600a97e77685452799f637600a97e776877777ea9066a1863617401787e777777577957795779577954007600a26976549f69948c766b796c756b6d6d6c886d6d6d6d6d6d6d0059766b796c78770136798763787601367901367901367901367901367901367955766b796c756b6d6d6d6c93537a757b7b527975527978a06975687558766b796c78770136798763787601367901367901367901367901367901367954766b796c756b6d6d6d6c93537a757b7b527975527978a06975687557766b796c78770136798763787601367901367901367901367901367901367953766b796c756b6d6d6d6c93537a757b7b527975527978a06975687556766b796c78770136798763787601367901367901367901367901367901367952766b796c756b6d6d6d6c93537a757b7b527975527978a06975687555766b796c78770136798763787601367901367901367901367901367901367951766b796c756b6d6d6d6c93537a757b7b527975527978a06975687554766b796c78770136798763787601367901367901367901367901367901367900766b796c756b6d6d6d6c93537a757b7b527975527978a06975687500000001377901397978827d770122a1696e7e53797e777777014d766b796c750144766b796c75630149766b796c787700a06953797893547a7572537a547953797e557a75547a547a547a547a6e7ea9a90155766b796c75a978885679787e577a75567a567a567a567a567a567a56796d756776013a7987916954790154766b796c75a97e557a75547a547a547a547a54797877827700a0635379780141766b796c7578827d770122a1696e7e53797e7777777e547a7572537a537975686875014d8c766b796c7501448c766b796c756301498c766b796c787700a06953797893547a7572537a547953797e557a75547a547a547a547a6e7ea9a901558c766b796c75a978885679787e577a75567a567a567a567a567a567a56796d756776013a79879169547901548c766b796c75a97e557a75547a547a547a547a54797877827700a06353797801418c766b796c7578827d770122a1696e7e53797e7777777e547a7572537a537975686875014d5294766b796c7501445294766b796c756301495294766b796c787700a06953797893547a7572537a547953797e557a75547a547a547a547a6e7ea9a901555294766b796c75a978885679787e577a75567a567a567a567a567a567a56796d756776013a79879169547901545294766b796c75a97e557a75547a547a547a547a54797877827700a06353797801415294766b796c7578827d770122a1696e7e53797e7777777e547a7572537a537975686875014d5394766b796c7501445394766b796c756301495394766b796c787700a06953797893547a7572537a547953797e557a75547a547a547a547a6e7ea9a901555394766b796c75a978885679787e577a75567a567a567a567a567a567a56796d756776013a79879169547901545394766b796c75a97e557a75547a547a547a547a54797877827700a06353797801415394766b796c7578827d770122a1696e7e53797e7777777e547a7572537a537975686875014d5494766b796c7501445494766b796c756301495494766b796c787700a06953797893547a7572537a547953797e557a75547a547a547a547a6e7ea9a901555494766b796c75a978885679787e577a75567a567a567a567a567a567a56796d756776013a79879169547901545494766b796c75a97e557a75547a547a547a547a54797877827700a06353797801415494766b796c7578827d770122a1696e7e53797e7777777e547a7572537a537975686875547900a069547952799d5379a9066a1863617401787e770800000000000000007882777e787e777654797ea876012279876b6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6d6c7741c050929b74c1a04954b78b4b6035e97a5e078a5a0f28ec96d547bfee9ace803ac07d05165f4203e2838324db18e687fe52085c427e2b77d786729b1e2e3ab143f5014153a6663a2174091c0b4bc4c7093a9f1cd117e0216868d0a137e9f5570860541654fb7b6d61024ee04ad889528a11f9f5934b806a7cde8965383f0d7bdd4de4e80101000000'
        const tx = new btc.Transaction(txhex);
        const witness = tx.inputs[1].witnesses

        // following packages/tracker/src/services/tx/tx.service.ts
        const ownerPubKeyHashes = witness.slice(5, 10);
        const tokenAmounts = witness.slice(10, 15);

        for (let i = 0; i < 5; i++) {
            const ownerPubKeyHash = ownerPubKeyHashes[i].toString('hex');

            const t = tokenAmounts[i]
            if (t.length == 0) {
                continue
            }
            const tokenAmount = t.readIntLE(0, t.length)
            console.log(`Owner PubKeyHash: ${ownerPubKeyHash}, Token Amount: ${tokenAmount}`)
        }
        const taproot = 'bc1pnyd20hgcmte5seggdj98cy62eqa7ur7fy9lvx3k38qj85ttwdxpqft47ex'
        const addr = btc.Address(taproot)
        console.log("PubKeyHash from address", hash160(addr.toObject().hash))
    })
})
;

